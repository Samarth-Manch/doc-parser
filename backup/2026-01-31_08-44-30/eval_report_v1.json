{
  "evaluation_summary": {
    "generated_output": "adws/2026-01-31_08-44-30/populated_schema.json",
    "reference_output": "documents/json_output/vendor_creation_sample_bud.json",
    "bud_document": "documents/Vendor Creation Sample BUD.docx",
    "evaluation_timestamp": "2026-01-31T09:06:08.660133",
    "iteration": 1,
    "overall_score": 0.08,
    "pass_threshold": 0.9,
    "evaluation_passed": false
  },
  "panel_evaluation": [
    {
      "panel_name": "Basic Details",
      "total_fields": 33,
      "fields_with_logic": 29,
      "fields_with_rules_expected": 29,
      "fields_with_rules_generated": 2,
      "panel_score": 0.07,
      "issues": [
        {
          "field": "Search term / Reference Number",
          "issue": "Missing MAKE_DISABLED",
          "severity": "MEDIUM"
        },
        {
          "field": "Select the process type",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Account Group/Vendor Type",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Group key/Corporate Group",
          "issue": "Missing EXT_DROP_DOWN cascading",
          "severity": "HIGH"
        },
        {
          "field": "Country",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Company Code",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Mobile Number",
          "issue": "Missing VERIFY for mobile validation",
          "severity": "HIGH"
        },
        {
          "field": "Mobile Number 2-5 (Domestic)",
          "issue": "Missing MAKE_VISIBLE/INVISIBLE pairs",
          "severity": "MEDIUM"
        },
        {
          "field": "Mobile Number 2-5 (Import)",
          "issue": "Missing MAKE_VISIBLE/INVISIBLE pairs",
          "severity": "MEDIUM"
        },
        {
          "field": "Vendor Contact Email",
          "issue": "Missing VERIFY for email validation",
          "severity": "HIGH"
        },
        {
          "field": "Email 2",
          "issue": "Missing MAKE_VISIBLE/INVISIBLE and MAKE_MANDATORY pairs",
          "severity": "MEDIUM"
        }
      ]
    },
    {
      "panel_name": "PAN and GST Details",
      "total_fields": 27,
      "fields_with_logic": 22,
      "fields_with_rules_expected": 22,
      "fields_with_rules_generated": 12,
      "panel_score": 0.55,
      "issues": [
        {
          "field": "PAN",
          "issue": "VERIFY rule has correct ordinal mapping (10 destinations)",
          "severity": "PASS"
        },
        {
          "field": "Upload PAN",
          "issue": "OCR rule has postTriggerRuleIds to VERIFY - GOOD",
          "severity": "PASS"
        },
        {
          "field": "GSTIN IMAGE",
          "issue": "OCR rule has postTriggerRuleIds to VERIFY - GOOD",
          "severity": "PASS"
        },
        {
          "field": "GSTIN",
          "issue": "VERIFY rule missing destinationIds (should have 11 ordinals)",
          "severity": "CRITICAL"
        },
        {
          "field": "GSTIN_WITH_PAN",
          "issue": "Cross-validation rule present but missing params",
          "severity": "HIGH"
        },
        {
          "field": "Trade Name",
          "issue": "Missing MAKE_INVISIBLE pair",
          "severity": "MEDIUM"
        },
        {
          "field": "Legal Name",
          "issue": "Missing MAKE_INVISIBLE pair",
          "severity": "MEDIUM"
        },
        {
          "field": "Type to Pin Code fields",
          "issue": "Missing consolidated visibility rules",
          "severity": "MEDIUM"
        }
      ]
    },
    {
      "panel_name": "Vendor Basic Details",
      "total_fields": 8,
      "fields_with_logic": 7,
      "fields_with_rules_expected": 7,
      "fields_with_rules_generated": 0,
      "panel_score": 0.0,
      "issues": [
        {
          "field": "Business Registration Number Available?",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Business Registration Number",
          "issue": "Missing MAKE_VISIBLE/INVISIBLE pairs",
          "severity": "MEDIUM"
        }
      ]
    },
    {
      "panel_name": "Address Details",
      "total_fields": 13,
      "fields_with_logic": 12,
      "fields_with_rules_expected": 12,
      "fields_with_rules_generated": 0,
      "panel_score": 0.0,
      "issues": [
        {
          "field": "Please Choose Address Proof",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Electricity bill copy",
          "issue": "Missing MAKE_VISIBLE/INVISIBLE",
          "severity": "MEDIUM"
        },
        {
          "field": "Aadhaar Front/Back copy",
          "issue": "Missing MAKE_VISIBLE/INVISIBLE",
          "severity": "MEDIUM"
        },
        {
          "field": "Aadhaar Back Image",
          "issue": "Missing OCR rule (AADHAR_BACK_IMAGE)",
          "severity": "HIGH"
        },
        {
          "field": "City/District/State",
          "issue": "Missing PIN code validation VERIFY",
          "severity": "HIGH"
        }
      ]
    },
    {
      "panel_name": "Bank Details",
      "total_fields": 12,
      "fields_with_logic": 12,
      "fields_with_rules_expected": 12,
      "fields_with_rules_generated": 5,
      "panel_score": 0.42,
      "issues": [
        {
          "field": "Cancelled Cheque Image",
          "issue": "OCR rule present with CHEQUEE sourceType - GOOD",
          "severity": "PASS"
        },
        {
          "field": "Bank Account Number",
          "issue": "VERIFY rule present but missing destinationIds",
          "severity": "CRITICAL"
        },
        {
          "field": "Passbook/Bank Letter",
          "issue": "Missing MAKE_VISIBLE/INVISIBLE",
          "severity": "MEDIUM"
        },
        {
          "field": "Bank Country",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        }
      ]
    },
    {
      "panel_name": "CIN and TDS Details",
      "total_fields": 6,
      "fields_with_logic": 6,
      "fields_with_rules_expected": 6,
      "fields_with_rules_generated": 0,
      "panel_score": 0.0,
      "issues": [
        {
          "field": "CIN Certificate",
          "issue": "Missing OCR rule (CIN)",
          "severity": "HIGH"
        },
        {
          "field": "CIN",
          "issue": "Missing conditional MAKE_MANDATORY",
          "severity": "MEDIUM"
        },
        {
          "field": "TDS Applicable?",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        }
      ]
    },
    {
      "panel_name": "MSME Details",
      "total_fields": 28,
      "fields_with_logic": 27,
      "fields_with_rules_expected": 27,
      "fields_with_rules_generated": 5,
      "panel_score": 0.19,
      "issues": [
        {
          "field": "Is SSI / MSME Applicable?",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "MSME Image",
          "issue": "OCR rule present but sourceType is 'post-upload' not 'MSME'",
          "severity": "HIGH"
        },
        {
          "field": "MSME Registration Number",
          "issue": "VERIFY rule present but sourceType incorrect",
          "severity": "HIGH"
        },
        {
          "field": "Name to Classification Date (22 fields)",
          "issue": "MAKE_DISABLED rules present but not consolidated",
          "severity": "HIGH"
        },
        {
          "field": "MSME validation destinations",
          "issue": "VERIFY destinationIds empty (should have 39 ordinals)",
          "severity": "CRITICAL"
        }
      ]
    },
    {
      "panel_name": "Vendor Duplicity Details",
      "total_fields": 12,
      "fields_with_logic": 6,
      "fields_with_rules_expected": 6,
      "fields_with_rules_generated": 0,
      "panel_score": 0.0,
      "issues": [
        {
          "field": "Exception Duplicate Vendor creation",
          "issue": "Missing conditional MAKE_MANDATORY",
          "severity": "MEDIUM"
        }
      ]
    },
    {
      "panel_name": "Purchase Organization Details",
      "total_fields": 11,
      "fields_with_logic": 10,
      "fields_with_rules_expected": 10,
      "fields_with_rules_generated": 0,
      "panel_score": 0.0,
      "issues": [
        {
          "field": "Order currency",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Purchase Organization",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Incoterms",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Incoterms (Part 2)",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        }
      ]
    },
    {
      "panel_name": "Payment Details",
      "total_fields": 12,
      "fields_with_logic": 12,
      "fields_with_rules_expected": 12,
      "fields_with_rules_generated": 1,
      "panel_score": 0.08,
      "issues": [
        {
          "field": "Reconciliation acct",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Currency",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Is Vendor Your Customer?",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Customer Code",
          "issue": "Missing MAKE_VISIBLE/INVISIBLE and EXT_DROP_DOWN",
          "severity": "HIGH"
        }
      ]
    },
    {
      "panel_name": "Withholding Tax Details",
      "total_fields": 5,
      "fields_with_logic": 5,
      "fields_with_rules_expected": 5,
      "fields_with_rules_generated": 0,
      "panel_score": 0.0,
      "issues": [
        {
          "field": "Withholding Tax Type",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        },
        {
          "field": "Withholding Tax Code",
          "issue": "Missing EXT_DROP_DOWN",
          "severity": "HIGH"
        }
      ]
    }
  ],
  "bud_logic_verification": {
    "total_fields_with_logic": 148,
    "fields_correctly_processed": 22,
    "fields_with_issues": 126,
    "logic_compliance_rate": 0.15,
    "unprocessed_patterns": [
      {
        "pattern": "External dropdown / reference table",
        "count": 19,
        "fields": [
          "Select the process type",
          "Account Group/Vendor Type",
          "Group key/Corporate Group",
          "Country",
          "Company Code",
          "TDS Applicable?",
          "Is SSI / MSME Applicable?",
          "Order currency",
          "Purchase Organization",
          "Incoterms",
          "Reconciliation acct",
          "Currency",
          "Is Vendor Your Customer?",
          "Withholding Tax Type",
          "Withholding Tax Code",
          "Bank Country",
          "Customer Code",
          "Additional File",
          "Business Registration Number Available?"
        ]
      },
      {
        "pattern": "Visibility pair (visible/invisible)",
        "count": 15,
        "fields": [
          "Process Type",
          "Vendor Domestic or Import",
          "Mobile Number 2-5",
          "Email 2",
          "Upload Declaration",
          "Trade Name",
          "Legal Name",
          "Business Registration Number",
          "Electricity bill copy",
          "Aadhaar copies",
          "Passbook/Bank Letter",
          "Customer Code",
          "MSME fields"
        ]
      },
      {
        "pattern": "Mandatory/Non-mandatory pair",
        "count": 12,
        "fields": [
          "Mobile Number 2-5",
          "Email 2",
          "CIN fields",
          "TDS Certificate",
          "MSME Declaration"
        ]
      },
      {
        "pattern": "OCR with AADHAR_BACK_IMAGE",
        "count": 1,
        "fields": [
          "Aadhaar Back Image"
        ]
      },
      {
        "pattern": "OCR with CIN",
        "count": 1,
        "fields": [
          "CIN Certificate"
        ]
      },
      {
        "pattern": "Mobile/Email validation",
        "count": 2,
        "fields": [
          "Mobile Number",
          "Vendor Contact Email"
        ]
      }
    ]
  },
  "rule_type_comparison": {
    "reference": {
      "MAKE_VISIBLE": 18,
      "MAKE_INVISIBLE": 19,
      "MAKE_DISABLED": 5,
      "MAKE_MANDATORY": 12,
      "MAKE_NON_MANDATORY": 10,
      "EXT_DROP_DOWN": 20,
      "EXT_VALUE": 13,
      "VERIFY": 5,
      "OCR": 6,
      "CONVERT_TO": 21,
      "COPY_TO": 13,
      "EXECUTE": 40,
      "VALIDATION": 18
    },
    "generated": {
      "MAKE_VISIBLE": 3,
      "MAKE_INVISIBLE": 0,
      "MAKE_DISABLED": 34,
      "MAKE_MANDATORY": 0,
      "MAKE_NON_MANDATORY": 0,
      "EXT_DROP_DOWN": 1,
      "EXT_VALUE": 0,
      "VERIFY": 12,
      "OCR": 4,
      "CONVERT_TO": 1,
      "COPY_TO": 0,
      "EXECUTE": 0,
      "VALIDATION": 0
    },
    "discrepancies": [
      {
        "action_type": "MAKE_VISIBLE",
        "generated": 3,
        "expected": 18,
        "delta": -15,
        "severity": "HIGH"
      },
      {
        "action_type": "MAKE_INVISIBLE",
        "generated": 0,
        "expected": 19,
        "delta": -19,
        "severity": "HIGH",
        "issue": "No MAKE_INVISIBLE rules generated - visibility pairs incomplete"
      },
      {
        "action_type": "MAKE_DISABLED",
        "generated": 34,
        "expected": 5,
        "delta": 29,
        "severity": "HIGH",
        "issue": "34 individual rules instead of 5 consolidated rules - not merged properly"
      },
      {
        "action_type": "MAKE_MANDATORY",
        "generated": 0,
        "expected": 12,
        "delta": -12,
        "severity": "HIGH"
      },
      {
        "action_type": "MAKE_NON_MANDATORY",
        "generated": 0,
        "expected": 10,
        "delta": -10,
        "severity": "HIGH"
      },
      {
        "action_type": "EXT_DROP_DOWN",
        "generated": 1,
        "expected": 20,
        "delta": -19,
        "severity": "HIGH"
      },
      {
        "action_type": "EXT_VALUE",
        "generated": 0,
        "expected": 13,
        "delta": -13,
        "severity": "HIGH"
      },
      {
        "action_type": "VERIFY",
        "generated": 12,
        "expected": 5,
        "delta": 7,
        "severity": "MEDIUM",
        "issue": "Extra VERIFY rules with incorrect sourceTypes (optional, upload limit, mandatory)"
      },
      {
        "action_type": "OCR",
        "generated": 4,
        "expected": 6,
        "delta": -2,
        "severity": "HIGH",
        "issue": "Missing AADHAR_BACK_IMAGE and CIN OCR rules"
      },
      {
        "action_type": "CONVERT_TO",
        "generated": 1,
        "expected": 21,
        "delta": -20,
        "severity": "MEDIUM"
      }
    ]
  },
  "critical_checks": {
    "json_structure_valid": true,
    "verify_ordinal_mapping": {
      "total_verify_rules": 5,
      "correct_ordinals": 1,
      "incorrect_ordinals": 4,
      "score": 0.2,
      "details": [
        {
          "field": "PAN",
          "sourceType": "PAN_NUMBER",
          "status": "PASS",
          "expected_dest_count": 10,
          "actual_dest_count": 10,
          "note": "Correct ordinal mapping with -1 placeholders"
        },
        {
          "field": "GSTIN",
          "sourceType": "GSTIN",
          "status": "FAIL",
          "expected_dest_count": 11,
          "actual_dest_count": 0,
          "note": "Empty destinationIds - should have 11 ordinals"
        },
        {
          "field": "GSTIN_WITH_PAN",
          "sourceType": "GSTIN_WITH_PAN",
          "status": "PARTIAL",
          "expected_dest_count": 0,
          "actual_dest_count": 0,
          "note": "Cross-validation rule exists but may need params"
        },
        {
          "field": "Bank Account Number",
          "sourceType": "BANK_ACCOUNT_NUMBER",
          "status": "FAIL",
          "expected_dest_count": 1,
          "actual_dest_count": 0,
          "note": "Empty destinationIds"
        },
        {
          "field": "MSME Registration Number",
          "sourceType": "MSME_UDYAM_REG_NUMBER",
          "status": "FAIL",
          "expected_dest_count": 39,
          "actual_dest_count": 0,
          "note": "Empty destinationIds - should have 39 ordinals"
        }
      ]
    },
    "ocr_verify_chains": {
      "total_ocr_rules": 4,
      "correctly_chained": 4,
      "missing_chains": 0,
      "score": 1.0,
      "details": [
        {
          "ocr_field": "Upload PAN",
          "sourceType": "PAN_IMAGE",
          "verify_field": "PAN",
          "chained": true,
          "postTriggerRuleIds": [
            52
          ]
        },
        {
          "ocr_field": "GSTIN IMAGE",
          "sourceType": "GSTIN_IMAGE",
          "verify_field": "GSTIN",
          "chained": true,
          "postTriggerRuleIds": [
            54
          ]
        },
        {
          "ocr_field": "Cancelled Cheque Image",
          "sourceType": "CHEQUEE",
          "verify_field": "Bank Account Number",
          "chained": true,
          "postTriggerRuleIds": [
            56
          ]
        },
        {
          "ocr_field": "MSME Image",
          "sourceType": "post-upload",
          "verify_field": "MSME Registration Number",
          "chained": true,
          "postTriggerRuleIds": [
            58
          ],
          "note": "Incorrect sourceType - should be MSME"
        }
      ],
      "missing_ocr_rules": [
        {
          "field": "Aadhaar Back Image",
          "expected_sourceType": "AADHAR_BACK_IMAGE",
          "schema_id": 348
        },
        {
          "field": "CIN Certificate",
          "expected_sourceType": "CIN",
          "schema_id": 349
        }
      ]
    }
  },
  "missing_rules": [
    {
      "category": "MAKE_INVISIBLE",
      "missing_count": 19,
      "severity": "HIGH",
      "pattern": "All visibility logic needs MAKE_INVISIBLE (NOT_IN) pair with MAKE_VISIBLE (IN)",
      "affected_panels": [
        "Basic Details",
        "PAN and GST Details",
        "Vendor Basic Details",
        "Address Details",
        "Bank Details",
        "MSME Details",
        "Payment Details"
      ]
    },
    {
      "category": "EXT_DROP_DOWN",
      "missing_count": 19,
      "severity": "HIGH",
      "pattern": "Fields with 'dropdown values', 'reference table', 'external' in logic",
      "fields": [
        {
          "name": "Select the process type",
          "logic_excerpt": "Dropdown values are India, International"
        },
        {
          "name": "Account Group/Vendor Type",
          "logic_excerpt": "reference table 1.3"
        },
        {
          "name": "Group key/Corporate Group",
          "logic_excerpt": "based on account group selection"
        },
        {
          "name": "Country",
          "logic_excerpt": "dropdown based on process type"
        },
        {
          "name": "Company Code",
          "logic_excerpt": "column 3 based on process type filter"
        },
        {
          "name": "Order currency",
          "logic_excerpt": "refer Table 1.4"
        },
        {
          "name": "Purchase Organization",
          "logic_excerpt": "refer Table 1.4"
        },
        {
          "name": "Incoterms",
          "logic_excerpt": "refer Table 1.5"
        },
        {
          "name": "Reconciliation acct",
          "logic_excerpt": "refer Table 1.8"
        },
        {
          "name": "Withholding Tax Type",
          "logic_excerpt": "refer table 1.6"
        },
        {
          "name": "Withholding Tax Code",
          "logic_excerpt": "refer table 1.6"
        }
      ]
    },
    {
      "category": "EXT_VALUE",
      "missing_count": 13,
      "severity": "HIGH",
      "pattern": "Cascading dropdown dependent values"
    },
    {
      "category": "MAKE_MANDATORY",
      "missing_count": 12,
      "severity": "HIGH",
      "pattern": "Fields with 'mandatory if', 'mandatory when' logic",
      "fields": [
        {
          "name": "Mobile Number 2-5 (Domestic)",
          "logic_excerpt": "Mandatory if additional mobile Yes"
        },
        {
          "name": "Mobile Number 2-5 (Import)",
          "logic_excerpt": "Mandatory if additional mobile Yes"
        },
        {
          "name": "Email 2",
          "logic_excerpt": "mandatory if additional email Yes"
        },
        {
          "name": "CIN fields",
          "logic_excerpt": "mandatory if PAN 4th char is C"
        },
        {
          "name": "TDS Certificate",
          "logic_excerpt": "mandatory if TDS Applicable Yes"
        }
      ]
    },
    {
      "category": "MAKE_NON_MANDATORY",
      "missing_count": 10,
      "severity": "HIGH",
      "pattern": "Paired with MAKE_MANDATORY for conditional mandatory logic"
    },
    {
      "category": "OCR",
      "missing_count": 2,
      "severity": "HIGH",
      "fields": [
        {
          "name": "Aadhaar Back Image",
          "expected_sourceType": "AADHAR_BACK_IMAGE",
          "schema_id": 348,
          "destinationIds": "Street, City, District, State, Pin (address fields)"
        },
        {
          "name": "CIN Certificate",
          "expected_sourceType": "CIN",
          "schema_id": 349,
          "destinationIds": "CIN number field"
        }
      ]
    },
    {
      "category": "CONVERT_TO",
      "missing_count": 20,
      "severity": "MEDIUM",
      "pattern": "Fields with 'upper case', 'uppercase' in logic",
      "fields": [
        "PAN",
        "Pan Holder Name",
        "PAN Type",
        "PAN Status",
        "Trade Name",
        "Legal Name"
      ]
    }
  ],
  "false_positives": [
    {
      "category": "VERIFY",
      "count": 7,
      "issue": "Extra VERIFY rules with incorrect sourceTypes",
      "details": [
        {
          "rule_id": 4,
          "sourceType": "optional",
          "should_be": "Removed or corrected"
        },
        {
          "rule_id": 7,
          "sourceType": "optional",
          "should_be": "Removed or corrected"
        },
        {
          "rule_id": 22,
          "sourceType": "optional",
          "should_be": "Removed or corrected"
        },
        {
          "rule_id": 23,
          "sourceType": "upload limit",
          "should_be": "Removed or corrected"
        },
        {
          "rule_id": 26,
          "sourceType": "mandatory",
          "should_be": "Removed or corrected"
        },
        {
          "rule_id": 52,
          "sourceType": "PAN_NUMBER",
          "should_be": "Duplicate of rule 8"
        }
      ]
    },
    {
      "category": "MAKE_DISABLED",
      "count": 34,
      "issue": "Individual MAKE_DISABLED rules instead of consolidated (should be 5)",
      "recommendation": "Merge rules with same sourceIds + condition, combine destinationIds"
    },
    {
      "category": "OCR",
      "count": 1,
      "issue": "MSME OCR rule has incorrect sourceType",
      "details": [
        {
          "rule_id": 27,
          "actual_sourceType": "post-upload",
          "expected_sourceType": "MSME",
          "schema_id": 214
        }
      ]
    }
  ],
  "self_heal_instructions": {
    "priority_fixes": [
      {
        "priority": 1,
        "fix_type": "add_make_invisible_pairs",
        "description": "Add MAKE_INVISIBLE (NOT_IN) rules to pair with existing MAKE_VISIBLE (IN) rules",
        "severity": "HIGH",
        "affected_count": 19,
        "implementation": "For each MAKE_VISIBLE rule with condition=IN, create matching MAKE_INVISIBLE with condition=NOT_IN and same conditionalValues",
        "example": {
          "existing_visible": {
            "actionType": "MAKE_VISIBLE",
            "condition": "IN",
            "conditionalValues": [
              "yes"
            ]
          },
          "needed_invisible": {
            "actionType": "MAKE_INVISIBLE",
            "condition": "NOT_IN",
            "conditionalValues": [
              "yes"
            ]
          }
        }
      },
      {
        "priority": 2,
        "fix_type": "fix_verify_destination_ordinals",
        "description": "Fix VERIFY rules with empty/incorrect destinationIds",
        "severity": "CRITICAL",
        "affected_rules": [
          {
            "field": "GSTIN",
            "sourceType": "GSTIN",
            "expected_ordinals": 11,
            "schema_ref": "Schema 355"
          },
          {
            "field": "Bank Account Number",
            "sourceType": "BANK_ACCOUNT_NUMBER",
            "expected_ordinals": 1,
            "schema_ref": "Schema 361"
          },
          {
            "field": "MSME Registration Number",
            "sourceType": "MSME_UDYAM_REG_NUMBER",
            "expected_ordinals": 39,
            "schema_ref": "Schema 337"
          }
        ],
        "implementation": "Map BUD destination fields to ordinal positions using Rule-Schemas.json destinationFields definitions"
      },
      {
        "priority": 3,
        "fix_type": "add_ext_dropdown_rules",
        "description": "Add EXT_DROP_DOWN rules for all dropdown fields with external/reference table logic",
        "severity": "HIGH",
        "affected_count": 19,
        "implementation": "Parse BUD logic for 'dropdown values', 'reference table', 'refer Table X.Y' patterns",
        "template": {
          "actionType": "EXT_DROP_DOWN",
          "sourceType": "FORM_FILL_DROP_DOWN",
          "sourceIds": [
            "<field_id>"
          ],
          "params": {
            "tableName": "<extracted_table_ref>"
          }
        }
      },
      {
        "priority": 4,
        "fix_type": "add_mandatory_rules",
        "description": "Add MAKE_MANDATORY and MAKE_NON_MANDATORY pairs for conditional mandatory fields",
        "severity": "HIGH",
        "affected_count": 22,
        "implementation": "Parse BUD logic for 'mandatory if', 'mandatory when' patterns",
        "template": {
          "make_mandatory": {
            "actionType": "MAKE_MANDATORY",
            "condition": "IN",
            "conditionalValues": [
              "<trigger_value>"
            ]
          },
          "make_non_mandatory": {
            "actionType": "MAKE_NON_MANDATORY",
            "condition": "NOT_IN",
            "conditionalValues": [
              "<trigger_value>"
            ]
          }
        }
      },
      {
        "priority": 5,
        "fix_type": "add_missing_ocr_rules",
        "description": "Add missing OCR rules for Aadhaar Back and CIN",
        "severity": "HIGH",
        "affected_fields": [
          {
            "name": "Aadhaar Back Image",
            "sourceType": "AADHAR_BACK_IMAGE",
            "schema_id": 348,
            "destinationIds": "[-1, -1, <street_id>, <city_id>, <district_id>, <state_id>, -1, -1]"
          },
          {
            "name": "CIN Certificate",
            "sourceType": "CIN",
            "schema_id": 349,
            "destinationIds": "[<cin_number_id>]"
          }
        ]
      },
      {
        "priority": 6,
        "fix_type": "consolidate_disabled_rules",
        "description": "Merge 34 individual MAKE_DISABLED rules into 5 consolidated rules",
        "severity": "HIGH",
        "current_count": 34,
        "expected_count": 5,
        "implementation": "Group MAKE_DISABLED rules by sourceIds pattern, merge destinationIds into single rule with array of all disabled field IDs"
      },
      {
        "priority": 7,
        "fix_type": "fix_incorrect_source_types",
        "description": "Fix VERIFY and OCR rules with incorrect sourceTypes",
        "severity": "HIGH",
        "fixes": [
          {
            "rule_type": "VERIFY",
            "incorrect": "optional",
            "action": "Remove rule - not a valid validation type"
          },
          {
            "rule_type": "VERIFY",
            "incorrect": "upload limit",
            "action": "Remove rule - not a valid validation type"
          },
          {
            "rule_type": "VERIFY",
            "incorrect": "mandatory",
            "action": "Remove rule - not a valid validation type"
          },
          {
            "rule_type": "OCR",
            "incorrect": "post-upload",
            "expected": "MSME",
            "schema_id": 214
          }
        ]
      },
      {
        "priority": 8,
        "fix_type": "remove_duplicate_rules",
        "description": "Remove duplicate VERIFY rules",
        "severity": "MEDIUM",
        "duplicates": [
          {
            "keep": "rule_id: 8 (PAN_NUMBER)",
            "remove": "rule_id: 52 (duplicate PAN_NUMBER)"
          },
          {
            "keep": "rule_id: 10 (GSTIN_WITH_PAN)",
            "remove": "second occurrence of rule_id: 10"
          }
        ]
      },
      {
        "priority": 9,
        "fix_type": "add_convert_to_rules",
        "description": "Add CONVERT_TO UPPER_CASE rules for PAN-related fields",
        "severity": "MEDIUM",
        "affected_fields": [
          "PAN",
          "Pan Holder Name",
          "PAN Type",
          "PAN Status"
        ],
        "implementation": "Create CONVERT_TO rule with sourceType: UPPER_CASE for each field"
      }
    ],
    "iteration_target": {
      "current_score": 0.2,
      "next_iteration_target": 0.6,
      "final_target": 0.9,
      "estimated_iterations_remaining": 2
    }
  }
}